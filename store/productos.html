<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos - Tienda en Línea</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <header>
        <h1>Productos</h1>
        <nav class="navbar">
            <ul>
                <li><a href="../index.html">Inicio</a></li>
                <li><a href="productos.html">Productos</a></li>
                <li><a href="carrito.html">Carrito</a></li>
                <li><a href="admin.html">Administrador</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="productos">
            <h2>Nuestros Productos</h2>
            <div class="productos-lista">
                <!-- Productos dinámicos aquí -->
                <div class="producto">
                    <img src="../img/producto1.jpg" alt="Producto 1">
                    <h3>Producto 1</h3>
                    <p>$19.99</p>
                    <label for="cantidad1">Cantidad:</label>
                    <input type="number" id="cantidad1" min="1" value="1">
                    <button onclick="agregarAlCarrito('Producto 1', 19.99, document.getElementById('cantidad1').value)">Agregar al Carrito</button>
                </div>
                <div class="producto">
                    <img src="../img/producto2.jpg" alt="Producto 2">
                    <h3>Producto 2</h3>
                    <p>$25.99</p>
                    <label for="cantidad2">Cantidad:</label>
                    <input type="number" id="cantidad2" min="1" value="1">
                    <button onclick="agregarAlCarrito('Producto 2', 25.99, document.getElementById('cantidad2').value)">Agregar al Carrito</button>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Tienda en Línea. Todos los derechos reservados.</p>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";
    
        const firebaseConfig = {
            apiKey: "AIzaSyBgIheO2RtRC55SVBCkZfomoElB2Lu1UVY",
            authDomain: "hacienda-la-violeta.firebaseapp.com",
            projectId: "hacienda-la-violeta",
            storageBucket: "hacienda-la-violeta.appspot.com",
            messagingSenderId: "892026900805",
            appId: "1:892026900805:web:47453888b443aa6681ee2c",
            measurementId: "G-EPJL0ZKWP3"
        };
    
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
    
        async function loadProducts() {
            const productList = document.querySelector('.productos-lista');
            productList.innerHTML = '';
    
            try {
                const querySnapshot = await getDocs(collection(db, "products"));
                querySnapshot.forEach((doc) => {
                    const product = doc.data();
                    const card = `
                        <div class="producto">
                            <img src="${product.imageUrl}" alt="${product.name}">
                            <h3>${product.name}</h3>
                            <p>${product.weight}</p>
                            <p>$${product.price.toFixed(2)}</p>
                            <label for="cantidad-${doc.id}">Cantidad:</label>
                            <input type="number" id="cantidad-${doc.id}" min="1" value="1">
                            <button onclick="agregarAlCarrito('${product.name}', ${product.price}, document.getElementById('cantidad-${doc.id}').value)">Agregar al Carrito</button>
                        </div>`;
                    productList.innerHTML += card;
                });
            } catch (error) {
                console.error("Error al cargar productos:", error);
            }
        }
    
        window.onload = () => {
            loadProducts();
        };
    </script>
    
</body>
</html>
